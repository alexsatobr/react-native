{"version":3,"sources":["../../src/middleware/authenticate.js"],"names":["authenticate","req","res","next","token","header","User","findByToken","then","user","Promise","reject","catch","e","status","send","module","exports"],"mappings":";;AAAA;;AACA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxC,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAJ,CAAW,QAAX,CAAd;;AACAC,aAAKC,WAAL,CAAiBH,KAAjB,EAAwBI,IAAxB,CAA6B,UAACC,IAAD,EAAU;AACtC,QAAI,CAACA,IAAL,EAAW;AACV,aAAOC,OAAO,CAACC,MAAR,EAAP;AACA;;AAEDV,IAAAA,GAAG,CAACQ,IAAJ,GAAWA,IAAX;AACAR,IAAAA,GAAG,CAACG,KAAJ,GAAYA,KAAZ;AACAD,IAAAA,IAAI;AACJ,GARD,EAQGS,KARH,CAQS,UAACC,CAAD,EAAO;AACfX,IAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACA,GAVD;AAWA,CAbD;;AAeAC,MAAM,CAACC,OAAP,GAAiB;AAACjB,EAAAA,YAAY,EAAZA;AAAD,CAAjB","sourcesContent":["import {User} from './../models/user';\nconst authenticate = (req, res, next) => {\n\tconst token = req.header('x-auth');\n\tUser.findByToken(token).then((user) => {\n\t\tif (!user) {\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\treq.user = user;\n\t\treq.token = token;\n\t\tnext();\n\t}).catch((e) => {\n\t\tres.status(401).send();\n\t});\n};\n\nmodule.exports = {authenticate};"],"file":"authenticate.js"}